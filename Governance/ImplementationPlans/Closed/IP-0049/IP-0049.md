---
IP ID: IP-0049
DP Reference: DP-0013
Title: Validation Scenario Integration Bridge
Status: CLOSED
Date: 2026-02-18
Mode: EXECUTED/CLOSEOUT
Source of Scope Truth: Governance/IssueRegister/issue_register.json
Predecessor: None
Blocking Dependencies: None (CS-0117 resolved; CS-0119 implemented and validated in rerun evidence)
Execution Start: 2026-02-18T02:02:00Z
Execution Complete: 2026-02-18T02:09:19Z
Closure Approved: 2026-02-18T02:53:44Z
Stage A Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_StageA_RootCause_2026-02-18_020200.md
Stage B Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_StageB_DesignFreeze_2026-02-18_020400.md
Stage C Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_StageC_ControlledRemediation_2026-02-18_020600.md
Stage D Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_StageD_DomainValidation_2026-02-18_024700.md
Stage E Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_StageE_SystemRegression_2026-02-18_024800.md
Closeout Report: Governance/ImplementationPlans/Closed/IP-0049/Reports/IP-0049_Closeout_Traceability.md
Changelog: Governance/Changelogs/CHANGELOG_v1.2.0.0.md
Closure Recommendation: Governance/ImplementationReports/IP-0049_Closure_Recommendation_2026-02-18.md
---

# IP-0049 - DP-0013 - Validation Scenario Integration Bridge

## 1) Governance Header
- DP Reference: `DP-0013 - Validation & Diagnostics`
- IP Status: `CLOSED`
- Included CS count: `3`

## 2) Included CS Scope
| CS ID | Title | Severity | Status |
|---|---|---|---|
| `CS-0104` | Wrap existing validation runner as selectable Validation Scenario | HIGH | CLOSED |
| `CS-0117` | Validation dashboard compile regression: unresolved IDX_NET_HEAT blocks IP-0049 Stage E build validation | HIGH | CLOSED (`CLOSE_NO_CODE` after Stage E rerun pass) |
| `CS-0119` | F2 scenario selection overlay missing for runtime scenario start from Cold Shutdown baseline | MEDIUM | CLOSED |

## 3) Dependency Hierarchy Analysis
### Prerequisite CS items
- Within-domain prerequisite list is empty (parallel CS scope).

### Blocking relationships
- Original blocker: `DP-0008` scenario abstraction/registry and selection entrypoints were missing from runtime.
- Resolution in this execution: implemented the minimal scenario abstraction + registry bridge under canonical path `Assets/Scripts/ScenarioSystem/` so `CS-0104` can execute without UI-overlay dependency.
- Stage E blocker `CS-0117` is resolved after rerun build pass; no active blockers remain.

### Shared files/systems
- Validator view input bridge in `Assets/Scripts/Core/SceneBridge.cs`
- Validation runner entrypoints in `Assets/Scripts/Validation/HeatupSimEngine.cs`
- Scenario bridge contracts in `Assets/Scripts/ScenarioSystem/`
- Runtime selector surface in `Assets/Scripts/Validation/HeatupValidationVisual.cs`

### Interference risk between fixes
- Controlled by preserving canonical legacy start path (`StartSimulation()`) and routing scenario-start wrappers through the same method.

## 4) Execution Order and Critical Path
1. Stage A: confirm root cause and blocking seam.
2. Stage B: freeze minimal bridge design with no behavior rewrite.
3. Stage C: implement scenario abstraction/registry + validation wrapper + engine bridge.
4. Stage D: validate scenario listing and scenario-id start handoff traces.
5. Stage E: regression check for legacy startup path and build integrity.

Critical path: `Scenario contract -> Scenario registry -> Validation wrapper -> HeatupSimEngine bridge -> regression validation`

## 5) Cross-Domain Inclusion Protocol
- Cross-domain inclusion executed minimally against DP-0008-owned surfaces by adding only runtime scenario contracts/registry at the canonical path and a non-breaking bridge in `HeatupSimEngine`.
- Extended cross-domain inclusion executed for `CS-0119`: routed validator-view `F2` through `SceneBridge` and added selector overlay APIs in `HeatupValidationVisual` that consume scenario descriptors and start scenarios via `StartScenarioById`.

## 6) Execution Outcome Summary
- `CS-0104` implementation completed:
  - Added scenario abstraction contract and registry.
  - Added `validation.heatup.baseline` scenario wrapper that invokes canonical `StartSimulation()`.
  - Added `HeatupSimEngine` scenario bridge API: scenario listing + start by scenario ID.
  - Added optional runOnStart scenario routing with fallback to legacy start path.
- `CS-0117` resolved by Stage E rerun verification (`dotnet build Critical.slnx` PASS; `0` errors).
- `CS-0119` implemented:
  - Added validator-view `F2` selector routing in `SceneBridge`.
  - Added modal selector list using `GetAvailableScenarioDescriptors()`.
  - Added bridge-driven selector APIs in `HeatupValidationVisual` (`ToggleScenarioSelector`, `SetScenarioSelectorVisible`).
  - Added descriptor-driven start via `StartScenarioById()` to launch selected scenario.
- Validation result: `PASS` (Stage E rerun passed; compile baseline restored).
- Closure state: closed.

## 7) File Inventory
### New Files
- `Assets/Scripts/ScenarioSystem/ISimulationScenario.cs`
- `Assets/Scripts/ScenarioSystem/ScenarioRegistry.cs`
- `Assets/Scripts/ScenarioSystem/ValidationHeatupScenario.cs`
- `Assets/Scripts/Validation/HeatupSimEngine.Scenarios.cs`

### Modified Files
- `Assets/Scripts/Core/SceneBridge.cs`
- `Assets/Scripts/Validation/HeatupSimEngine.cs`
- `Assets/Scripts/Validation/HeatupValidationVisual.cs`
- `Assembly-CSharp.csproj`

## 8) Revision History
| Revision | Date | Author | Summary of Changes | Reason for Amendment |
|---|---|---|---|---|
| v0.1 | 2026-02-17 | Codex | Initial DP-0013 implementation plan draft for validation scenario bridge. | Prepare execution plan with explicit cross-domain blocking and protocol requirements. |
| v1.0 | 2026-02-18 | Codex | Executed Stage A-E workflow, implemented scenario bridge and validation wrapper, and generated closure recommendation package. | Complete CS-0104 execution scope with objective validation evidence. |
| v1.1 | 2026-02-18 | Codex | Added `CS-0117` to in-scope CS set and marked as active blocker from Stage E compile regression evidence. | Formalize blocking dependency per governance traceability requirements. |
| v1.2 | 2026-02-18 | Codex | Executed Stage E rerun and cleared `CS-0117` blocker; updated status to closure-recommended. | Record blocker resolution evidence and readiness for IP closeout. |
| v1.3 | 2026-02-18 | Codex | Added `CS-0119` to scope and implemented F2 selector overlay for runtime scenario selection/start. | Satisfy post-validation acceptance requirement for in-simulator scenario selection UX. |
| v1.4 | 2026-02-18 | Codex | Routed `F2` handling through `SceneBridge` and updated Stage D/E and closure evidence for bridge-owned validator input flow. | Align implementation with existing scene input architecture and maintain closure traceability. |
| v1.5 | 2026-02-18 | Codex | Closure approved; finalized CS close transaction, moved IP plan to `Closed/`, and recorded changelog entry per constitution. | Complete formal IP-0049 closeout after approval. |
